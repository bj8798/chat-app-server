(this["webpackJsonpchat-react-app"]=this["webpackJsonpchat-react-app"]||[]).push([[0],{101:function(e,t,a){},131:function(e,t){},135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(27),c=a.n(s),o=a(29),i=a(6),l=a(16),m=a(19),u=a(70),d=a(71),p=a(11),h={username:void 0,signingIn:!1,loginError:void 0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERNAME":return Object(p.a)(Object(p.a)({},e),{},{username:t.username,signingIn:!1,fullname:t.fullname});case"START_LOGIN":return Object(p.a)(Object(p.a)({},e),{},{signingIn:!0});case"END_LOGIN":return Object(p.a)(Object(p.a)({},e),{},{signingIn:!1});case"SET_LOGIN_ERROR":return Object(p.a)(Object(p.a)({},e),{},{loginError:t.errorMessage,signingIn:!1});default:return e}},f={activeUsers:{}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_USERS":return Object(p.a)(Object(p.a)({},e),{},{activeUsers:t.activeUsers});default:return e}},v=Object(m.c)({loginReducer:g,chatReducer:E}),S=Object(d.createLogger)(),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,b=[u.a,S],O=Object(m.e)(v,_(m.a.apply(void 0,b))),N=(a(45),a(14)),C=a(15),U=a(18),T=a(17),y=a(23),w=a(5),j=a(30),k=a(21),I=a.n(k),L=function(e,t){return{type:"SET_USERNAME",username:e,fullname:t}},x=function(e){return{type:"SET_LOGIN_ERROR",errorMesage:e}};I.a.defaults.baseURL="https://cryptic-journey-31189.herokuapp.com/";var R=function(e){Object(U.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).goToSignIn=function(){n.setState({redirect:"/signup"})},n.state={email:"",password:"",redirect:null},n}return Object(C.a)(a,[{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(i.a,{to:this.state.redirect}):this.props.fullname?r.a.createElement(i.a,{to:"/chat"}):r.a.createElement("div",{className:"form-div"},r.a.createElement(j.a,{fluid:"md"},r.a.createElement(w.a,null,r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{type:"email",value:this.state.email,onChange:function(t){e.setState({email:t.target.value})},placeholder:"Enter email"}),r.a.createElement(w.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})},placeholder:"Password"})),r.a.createElement(w.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(w.a.Check,{type:"checkbox",label:"Check me out"})),r.a.createElement(y.a,{variant:"primary",onClick:function(){return e.props.doLogin(e.state.email,e.state.password)},onTouchStart:function(){return e.props.doLogin(e.state.email,e.state.password)}},"Let me in :)")," ",r.a.createElement(y.a,{variant:"outline-info",onClick:this.goToSignIn,onTouchStart:function(){return e.setState({count:"Its clicked"})}},"I am New Here !"))))}}]),a}(r.a.Component),A=Object(l.b)((function(e){return{fullname:e.loginReducer.fullname}}),(function(e){return{doLogin:function(t,a){return e(function(e,t){return function(a){a({type:"START_LOGIN"}),I.a.post("/login",{username:e,password:t},{withCredentials:!0}).then((function(t){var n=t.data?t.data.fullname:"";a(L(e,n))})).catch((function(e){console.log("error:",e.message),a(x("Some issue occured"))}))}}(t,a))}}}))(R),G=(a(101),function(e){Object(U.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",fullname:""},n}return Object(C.a)(a,[{key:"render",value:function(){var e=this;return this.props.fullname?(console.log("full name setted:",this.props.fullname),r.a.createElement(i.a,{to:"/chat"})):r.a.createElement("div",{className:"form-div"},r.a.createElement(j.a,{fluid:"md"},r.a.createElement(w.a,null,r.a.createElement(w.a.Group,{controlId:"formBasicEmail"},r.a.createElement(w.a.Label,null,"Email address"),r.a.createElement(w.a.Control,{type:"email",value:this.state.email,onChange:function(t){e.setState({email:t.target.value})},placeholder:"Enter email"}),r.a.createElement(w.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(w.a.Group,{controlId:"formBasicPassword"},r.a.createElement(w.a.Label,null,"Password"),r.a.createElement(w.a.Control,{type:"password",value:this.state.password,onChange:function(t){e.setState({password:t.target.value})},placeholder:"Password"})),r.a.createElement(w.a.Group,{controlId:"formBasicName"},r.a.createElement(w.a.Label,null,"Full Name"),r.a.createElement(w.a.Control,{value:this.state.fullname,onChange:function(t){e.setState({fullname:t.target.value})},placeholder:"Enter Full Name"})),r.a.createElement(y.a,{variant:"primary",onClick:function(){return e.props.doSignUp(e.state.email,e.state.password,e.state.fullname)},onTouchStart:function(){return e.props.doSignUp(e.state.email,e.state.password,e.state.fullname)}},"Sign Me Up !!")," ")))}}]),a}(r.a.Component)),M=Object(l.b)((function(e){return{fullname:e.loginReducer.fullname}}),(function(e){return{doSignUp:function(t,a,n){return e(function(e,t,a){return function(n){n({type:"START_LOGIN"}),I.a.post("/signup",{username:e,password:t,fullname:a},{withCredentials:!0}).then((function(t){console.log("SignUp response:",t),n(L(e,a))})).catch((function(e){console.log("error:",e.message),n(x("Some issue occured"))}))}}(t,a,n))}}}))(G),D=a(73),P=a(72),B=a.n(P),W=(a(40),function(e){return console.log("props.incoming:",e.incoming),e.incoming?r.a.createElement("div",{className:"incoming_msg",key:e.text},r.a.createElement("div",{className:"incoming_msg_img"}," ",r.a.createElement("img",{src:"https://ptetutorials.com/images/user-profile.png",alt:"sunil"})," "),r.a.createElement("div",{className:"received_msg"},r.a.createElement("div",{className:"received_withd_msg"},r.a.createElement("p",null,e.text),r.a.createElement("span",{className:"time_date"},e.time)))):r.a.createElement("div",{className:"outgoing_msg"},r.a.createElement("div",{className:"sent_msg"},r.a.createElement("p",null,e.text),r.a.createElement("span",{className:"time_date"},e.time)," "))}),H=function(e){Object(U.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).handleSend=function(){console.log("at handle send:",n.state.messageText),n.props.sendHandler(n.state.messageText),n.setState({messageText:""})},n.state={messageText:""},n}return Object(C.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"type_msg"},r.a.createElement("div",{className:"input_msg_write"},r.a.createElement("input",{type:"text",className:"write_msg",placeholder:"Type a message",onChange:function(t){e.setState({messageText:t.target.value})},value:this.state.messageText}),r.a.createElement("button",{className:"msg_send_btn",type:"button",onClick:this.handleSend},r.a.createElement("i",{className:"fa fa-paper-plane-o","aria-hidden":"true"}))))}}]),a}(r.a.Component),V=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT,function(e){Object(U.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).setSocketAndListen=function(){n.socket=B.a.connect("https://cryptic-journey-31189.herokuapp.com/",{query:"username=".concat(n.props.username,"&fullname=").concat(n.props.fullname)}),n.socket.on("message_received",(function(e){n.addMessage(e.text,!0,n.getCurrentTimeString(),e.fromUser,n.props.username)}))},n.addMessage=function(e,t,a,r,s){var c={text:e,incoming:t,time:a,fromUser:r,toUser:s},o=[].concat(Object(D.a)(n.state.messageList),[c]);n.setState({messageList:o})},n.sendMessage=function(e,t){console.log("send Message from:",n.props.username," to:",n.state.activeChatUser),n.socket.emit("message_sent",{text:e,toUser:t,fromUser:n.props.username})},n.getCurrentTimeString=function(){return(new Date).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})},n.handleUserActivate=function(e){n.setState({activeChatUser:e})},n.handleSend=function(e){n.addMessage(e,!1,n.getCurrentTimeString(),n.props.username,n.state.activeChatUser),n.sendMessage(e,n.state.activeChatUser)},n.state={messageText:"",messageList:[],currentUsers:[],activeChatUser:""},n}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.props.username?(this.setSocketAndListen(),this.props.getActiveUsers()):this.props.getSessionInfo()}},{key:"componentDidUpdate",value:function(){!this.socket&&this.props.username&&(this.setSocketAndListen(),this.props.getActiveUsers())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"text-center"},"Quick Chat"),r.a.createElement("div",{className:"messaging"},r.a.createElement("div",{className:"inbox_msg"},r.a.createElement("div",{className:"inbox_people"},r.a.createElement("div",{className:"headind_srch"},r.a.createElement("div",{className:"recent_heading"},r.a.createElement("h4",null,"Recent")),r.a.createElement("div",{className:"srch_bar"},r.a.createElement("div",{className:"stylish-input-group"},r.a.createElement("input",{type:"text",className:"search-bar",placeholder:"Search"}),r.a.createElement("span",{className:"input-group-addon"},r.a.createElement("button",{type:"button"}," ",r.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"})," "))," "))),r.a.createElement("div",{className:"inbox_chat"},Object.keys(this.props.activeUsers).map((function(t){return e.props.username!==t?r.a.createElement("div",{className:t===e.state.activeChatUser?"chat_list active_chat":"chat_list",onClick:function(){return e.handleUserActivate(t)}},r.a.createElement("div",{className:"chat_people"},r.a.createElement("div",{className:"chat_img"}," ",r.a.createElement("img",{src:"https://ptetutorials.com/images/user-profile.png",alt:"profile image"})," "),r.a.createElement("div",{className:"chat_ib"},r.a.createElement("h5",null,e.props.activeUsers[t]," ",r.a.createElement("span",{className:"chat_date"},"Dec 25"))))):null})))),r.a.createElement("div",{className:"mesgs"},r.a.createElement("div",{className:"msg_history"},this.state.messageList.map((function(t){return t.fromUser===e.state.activeChatUser||t.toUser===e.state.activeChatUser?r.a.createElement(W,{text:t.text,incoming:t.incoming,time:t.time}):null}))),this.state.activeChatUser?r.a.createElement(H,{sendHandler:function(t){return e.handleSend(t)}}):null))))}}]),a}(r.a.Component)),K=Object(l.b)((function(e){return{fullname:e.loginReducer.fullname,username:e.loginReducer.username,activeUsers:e.chatReducer.activeUsers}}),(function(e){return{getSessionInfo:function(){return e((function(e){e({type:"START_LOGIN"}),I.a.get("/test_session",{withCredentials:!0}).then((function(t){var a=t.data.username,n=t.data.fullname;e(L(a,n))})).catch((function(t){console.log("error:",t.message),e(x("Some issue occured"))}))}))},getActiveUsers:function(){return e((function(e){e({type:"START_LOGIN"}),I.a.get("/get_active_users",{withCredentials:!0}).then((function(t){var a=t.data.activeUsers;e(function(e){return{type:"SET_ACTIVE_USERS",activeUsers:e}}(a))})).catch((function(t){console.log("error:",t.message),e(x("Some issue occured"))}))}))}}}))(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(134);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(l.a,{store:O},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:A}),r.a.createElement(i.b,{path:"/signup",component:M}),r.a.createElement(i.b,{path:"/chat",component:K}),r.a.createElement(i.b,{path:"/",component:A}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},40:function(e,t,a){},45:function(e,t,a){},74:function(e,t,a){e.exports=a(135)}},[[74,1,2]]]);
//# sourceMappingURL=main.014e06e6.chunk.js.map